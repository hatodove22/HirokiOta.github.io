# ニュース更新マニュアル

このドキュメントでは、ポートフォリオサイトのニュースを追加・更新する手順を詳しく説明します。

## 目次

- [⚠️ AI向け重大な注意書き（必須確認事項）](#-ai向け重大な注意書き必須確認事項)
- [用意しておく情報リスト](#用意しておく情報リスト)
- [概要](#概要)
- [更新手順](#更新手順)
- [各手順の詳細](#各手順の詳細)
- [よくある質問（FAQ）](#よくある質問faq)

---

## ⚠️ AI向け重大な注意書き（必須確認事項）

**この注意書きは、ニュース更新作業を行う際に、必ず最初に確認してください。**

**AIは以下のルールを厳守してください：**

### 更新作業開始前の必須確認

1. **必要な情報がすべて揃うまで更新作業を開始しない**
   - 以下の「ユーザーが用意すべき情報リスト」に記載されている情報が**すべて揃うまで**、更新作業を開始してはいけません。
   - 情報が不足している場合は、必ずユーザーに確認を取ってください。

2. **更新作業開始前の確認手順**
   - 更新作業を開始する前に、必ず以下の手順を実行してください：
     1. 以下の「ユーザーが用意すべき情報リスト」を確認
     2. ユーザーが提供した情報と照らし合わせて、不足している情報がないか確認
     3. 不足している情報がある場合は、**更新作業を開始せず**、ユーザーに不足している情報を明確に伝えて確認を取る
     4. **すべての必要な情報が揃ったことを確認できた場合のみ**、更新作業を開始する

3. **確認を取る際の注意点**
   - 不足している情報を箇条書きで明確に提示してください
   - ユーザーが「とりあえず進めて」などと言っても、必要な情報が不足している場合は、更新作業を開始しないでください
   - 情報が不足している場合は、「以下の情報が不足しているため、更新作業を開始できません。不足している情報を提供いただけますか？」という形で確認を取ってください

4. **情報が不足している場合の対応**
   - 情報が不足している場合は、**決して推測や仮の値で更新作業を進めないでください**
   - 情報が不足している場合は、**ファイルの作成・更新を行わないでください**
   - 情報が不足している場合は、**ユーザーに確認を取るまで待機してください**

---

## 用意しておく情報リスト

このポートフォリオは基本的にAIが更新することを前提としています。以下のリストは、ユーザーが用意すべき情報と、AIが適切に設定すべき情報を分けて記載しています。

### ユーザーが用意すべき情報リスト

ニュースを追加・更新する際に、ユーザーが提供すべき情報です。

#### 基本情報

- [ ] **ニュースタイトル**（日本語・英語）
  - 例: 日本語「DC2内定しました！」、英語「DC2 Research Fellowship Accepted!」
- [ ] **公開日**（`YYYY-MM-DD` 形式）
  - 例: `"2025-10-01"`
- [ ] **概要**（日本語・英語、短い説明文）
  - 例: 日本語「日本学術振興会が募集する特別研究員（DC）に内定しました。」
  - 例: 英語「I have been accepted as a Research Fellow (DC) by the Japan Society for the Promotion of Science (JSPS).」

#### 本文内容

- [ ] **本文の内容**（日本語・英語）
  - ニュースの詳細内容を記述してください
  - わかりやすく丁寧に記述してください
  - 専門用語を使用する場合は、用語のすぐ後にかっこ書きで簡潔な説明文を記載してください
  - 例: 「ハプティクス（触覚提示技術）」
  - 例: 「VR（バーチャルリアリティ）」

**注意**: 本文内容は、ユーザーが提供した内容を基に、AIが適切にフォーマットしてMarkdown形式で生成します。ユーザーは内容を提供するだけで構いません。

#### 画像・アセット（オプション）

- [ ] **サムネイル画像**（HeroImage、オプション）
  - サムネイル画像が指定されない場合、ランダムな絵文字が背景色 `#88beca`（ブルー）の中央に自動配置されます
  - 縦横比: 3:2（推奨）
  - 解像度: 1920px × 1280px（推奨）
  - ファイルサイズ: 1MB未満
  - 形式: PNG または JPEG
- [ ] **本文用画像**（GIF、説明図など、オプション）
  - 縦横比: 16:9（推奨）または用途に応じて自由
  - 解像度: 1600px × 900px（推奨）
  - ファイルサイズ: 2MB未満
  - 形式: PNG、JPEG、または GIF

#### その他の情報（オプション）

- [ ] **著者名**（オプション、デフォルト: "太田裕紀"）

**注意**: 
- **サムネイル画像**: サムネイル画像が指定されない場合、ランダムな絵文字が自動配置されるため、画像は必須ではありません。
- **本文**: ニュースは必ず日本語と英語の2つのバージョンを作成する運用のため、本文内容も日英両方で提供してください。

---

### AIが適切に設定すべき情報リスト

以下の情報は、AIがユーザーが提供した情報を基に自動的に生成・設定します。

#### 識別子・パス情報

- [ ] **ID**（一意のニュースID）
  - AIが既存のIDを確認し、重複しない一意のIDを生成
  - 例: `"news-1"`, `"news-2"`, `"news-3"` など
- [ ] **スラッグ**（URL用の英数字）
  - AIがニュースタイトルから適切なスラッグを生成
  - 既存のスラッグと重複しないことを確認
  - 例: `"dc2-accepted"`, `"france-study-abroad"` など
- [ ] **ディレクトリ名**（ニュースフォルダ名）
  - AIが `news-{id}-{slug}` の形式でディレクトリ名を生成
  - 例: `news-3-dc2-accepted`
- [ ] **ファイルパス**（画像パスなど）
  - AIがディレクトリ構造に基づいて適切なパスを生成
  - 例: `"/content/news/news-3-dc2-accepted/images/hero-image.jpg"`

#### 本文内容の生成

AIがユーザーが提供した本文内容を基に、以下の形式で本文を生成します：

- [ ] **Markdown形式の本文**
  - 見出し（`#`, `##`, `###`, `####` など）
  - 段落
  - リスト（箇条書き、番号付き）
  - 画像（`![説明](/path/to/image.png)`）
  - リンク（`[リンクテキスト](https://example.com)`）
  - YouTube動画の埋め込み（URLのみの段落は自動的にiframe化）

**生成ファイル**:
- `content/article_ja.md`（日本語版）
- `content/article_en.md`（英語版）

#### AIによる本文生成時の注意事項

AIは以下の注意事項に従って本文を生成してください：

##### 1. フォーマットの遵守

- 見出しは適切なレベルを使用してください：
  - `#` は使用しない（記事タイトルとして使用）
  - `##` は主要セクション
  - `###` はサブセクション
  - `####` はサブサブセクション
- 段落は適切に分割してください
- リストは適切に使用してください（箇条書き、番号付き）
- 画像の追加が必要な場合は、適切な位置にMarkdown形式で画像を挿入してください

##### 2. 読者層の想定

- **まったく専門外の人間が読むことを想定**してください
- 専門用語はできるだけ使用を避けてください
- 専門用語を使用する場合は、**用語のすぐ後にかっこ書きで簡潔な説明文を記載**してください
  - 例: 「ハプティクス（触覚提示技術）」
  - 例: 「VR（バーチャルリアリティ）」
  - 例: 「INRIA（フランス国立情報科学・自動制御研究所）」

##### 3. 文体とスタイル

- **ですます調**で記述してください
- **わかりやすさを重視**してください
  - 長い文章は適度に分割してください
  - 複雑な概念は簡潔に説明してください
  - 具体例を交えて説明してください

##### 4. 既存ニュースの参照

- **既存のニュースの文章を参照**してください
  - `content/news/news-3-dc2-accepted/content/article_ja.md` や `article_en.md` などを参考にしてください
  - 既存ニュースと同じトーンや文体を意識してください
  - 既存ニュースで使用されている専門用語の説明方法を参考にしてください

##### 5. 日英両方の生成

- 日本語版（`article_ja.md`）と英語版（`article_en.md`）の両方を生成してください
- 英語版は、日本語版を単純に翻訳するのではなく、英語圏の読者にもわかりやすいように再構成してください
- 専門用語の説明は、それぞれの言語で適切に表現してください

##### 6. 画像の追加

- 画像が必要な場合、適切な位置にMarkdown形式で画像を挿入してください
- 画像パスは、ニュースのディレクトリ構造に基づいて正しく設定してください
  - 例: `![Background](/content/news/news-3-dc2-accepted/images/background.gif)`

##### 7. YouTube動画の埋め込み

- YouTube動画を埋め込みたい場合は、URLのみの段落として記述してください
  - 例: `https://youtu.be/yP-vO3BtxDc?si=SqRDtAp1biD-Qszg`
- システムが自動的にiframe化します

##### 8. 見出しのマージン

- 見出しレベルに応じた適切なマージンが設定されています：
  - H1: `marginTop: '4rem'`
  - H2: `marginTop: '2.5rem'`
  - H3: `marginTop: '2rem'`
  - H4: `marginTop: '1.5rem'`
  - H5: `marginTop: '1.25rem'`
  - H6: `marginTop: '1rem'`

##### 9. リストと画像のマージン

- リストの上下マージン: `1.25rem`
- 画像の上下マージン: `2rem`

#### メタデータの自動生成

- [ ] **`tags`**（タグ）
  - AIがニュースの内容を分析し、適切なタグを自動生成
  - 既存のニュースのタグを参考にしつつ、ニュースの内容に基づいて決定
  - 例: `["Research", "Fellowship", "JSPS"]`, `["Study Abroad", "Research", "Haptics"]`
  - 配列形式で設定
- [ ] **`category`**（カテゴリ）
  - AIがニュースの内容を分析し、適切なカテゴリを自動決定
  - 既存のニュースのカテゴリを参考にしつつ、ニュースの内容に基づいて決定
  - 例: `"research"`, `"award"`, `"conference"`, `"study-abroad"` など
  - デフォルト: `"general"`（該当するカテゴリがない場合）
- [ ] **`readTime`**（読了時間）
  - AIが本文の文字数を分析し、適切な読了時間を自動計算
  - 日本語版と英語版の両方を考慮して計算
  - 例: `"3 min"`, `"5 min"`, `"7 min"` など
  - デフォルト: `"5 min"`（計算が難しい場合）

#### 自動設定項目

- [ ] **`status`**（公開状態）
  - デフォルト: `"published"`
  - 下書きの場合は `"draft"` を設定
- [ ] **`language`**（言語設定）
  - メタデータファイルでは `"ja"` を設定（デフォルト）
  - 実際の表示時はロケールに応じて動的に設定される
- [ ] **`author`**（著者名）
  - デフォルト: `"太田裕紀"`
  - ユーザーが指定しない場合はデフォルトを使用
- [ ] **ディレクトリ構造の作成**
  - AIが以下のディレクトリ構造を自動生成：
    ```
    news-{id}-{slug}/
    ├── info/
    │   └── metadata.json
    ├── content/
    │   ├── article_ja.md
    │   └── article_en.md
    └── images/
    ```
- [ ] **`public/content` へのコピー**
  - `content/news/news-{id}-{slug}/` の内容を `public/content/news/news-{id}-{slug}/` にコピー
  - Viteが `/content` パスを `public/content` から配信するため、必須
- [ ] **`NEWS_FALLBACK_FOLDERS` への追加**
  - `src/lib/content-loader.ts` の `NEWS_FALLBACK_FOLDERS` 配列に新しいニュースフォルダ名を追加

#### AIの命名規則

AIは以下の規則に従って識別子を生成します：

1. **IDの生成**
   - 既存のニュースIDを確認
   - 最大のIDに1を加えた値を新しいIDとして設定
   - 例: 既存の最大IDが `"news-4"` の場合、新規IDは `"news-5"`

2. **スラッグの生成**
   - ニュースタイトル（英語）から生成
   - 小文字に変換
   - スペースや特殊文字をハイフンに変換
   - 既存のスラッグと重複しないことを確認
   - 例: "DC2 Research Fellowship Accepted!" → `"dc2-research-fellowship-accepted"`

3. **ディレクトリ名の生成**
   - `news-{id}-{slug}` の形式
   - 例: ID `"news-3"`, スラッグ `"dc2-accepted"` → `news-3-dc2-accepted`

---

### チェックリスト

更新作業を開始する前に、以下を確認してください：

#### ユーザー側の確認事項

- [ ] ニュースタイトルが日英両方で用意されているか
- [ ] 概要が日英両方で用意されているか
- [ ] 本文内容が日英両方で用意されているか
- [ ] 日付が `YYYY-MM-DD` 形式になっているか
- [ ] 画像ファイルが最適化されているか（ファイルサイズ、解像度、オプション）

#### AI側の確認事項

- [ ] スラッグが既存ニュースと重複していないか
- [ ] IDが一意であるか（既存のIDと重複していないか）
- [ ] ディレクトリ構造が正しく作成されているか
- [ ] ファイルパスが正しく設定されているか
- [ ] メタデータの必須フィールドがすべて設定されているか
- [ ] `status` が `"published"` になっているか
- [ ] `tags` が適切に設定されているか（AIが自動生成）
- [ ] `category` が適切に設定されているか（AIが自動決定）
- [ ] `readTime` が適切に設定されているか（AIが自動計算）
- [ ] 本文内容が適切なMarkdown形式で生成されているか
- [ ] 専門用語に適切な説明が追加されているか
- [ ] ですます調で記述されているか
- [ ] 既存ニュースの文章を参照して、同じトーンや文体で記述されているか
- [ ] 日英両方の本文が生成されているか
- [ ] `public/content` にファイルがコピーされているか
- [ ] `NEWS_FALLBACK_FOLDERS` に新しいニュースフォルダ名が追加されているか

---

## 概要

ニュースは `content/news/` ディレクトリ配下のファイルで管理されています。各ニュースは以下のディレクトリ構造を持ちます：

```
content/news/
└── news-{id}-{slug}/
    ├── info/
    │   └── metadata.json       # メタデータ（タイトル、日付、タグなど）
    ├── content/
    │   ├── article_ja.md       # 日本語の本文
    │   └── article_en.md       # 英語の本文
    └── images/                  # 画像ファイル（HeroImage、GIFなど、オプション）
```

**重要な注意点**:
- **`public/content` へのコピー**: Viteは `/content` パスを `public/content` から配信するため、`content/news/` に追加したファイルは必ず `public/content/news/` にもコピーする必要があります。
- **`NEWS_FALLBACK_FOLDERS` への追加**: `src/lib/content-loader.ts` の `NEWS_FALLBACK_FOLDERS` 配列に新しいニュースフォルダ名を追加する必要があります。

---

## 更新手順

### 1. メタデータの作成・更新
AIが `info/metadata.json` を作成・編集して、ニュースの基本情報（タイトル、日付、タグなど）を設定します。

### 2. 本文の生成
AIがユーザーが提供した本文内容を基に、`content/article_ja.md` および `content/article_en.md` を生成します。

### 3. 画像・アセットの追加・更新（オプション）
AIが `images/` ディレクトリに新しいファイルを追加、または既存ファイルを置き換えます。

### 4. `public/content` へのコピー
AIが `content/news/` の内容を `public/content/news/` にコピーします。

### 5. `NEWS_FALLBACK_FOLDERS` への追加
AIが `src/lib/content-loader.ts` の `NEWS_FALLBACK_FOLDERS` 配列に新しいニュースフォルダ名を追加します。

### 6. 表示確認
開発サーバーで変更内容を確認し、問題がなければビルドして最終確認します。

---

## 各手順の詳細

### 1. メタデータの作成・更新

#### ファイルの場所
```
content/news/news-{id}-{slug}/info/metadata.json
```

#### 作成手順

1. **ニュースディレクトリを作成**
   - 例: `content/news/news-3-dc2-accepted/info/`

2. **`metadata.json` を作成**

3. **各項目を設定**

#### メタデータの各項目の説明

| 項目 | 説明 | 必須 | 例 |
|------|------|------|-----|
| `id` | ニュースの一意のID | ✅ | `"news-3"` |
| `title` | ニュースタイトル（日英対応） | ✅ | `{"ja": "DC2内定しました！", "en": "DC2 Research Fellowship Accepted!"}` |
| `slug` | URL用のスラッグ（英数字とハイフンのみ） | ✅ | `"dc2-accepted"` |
| `date` | 公開日（YYYY-MM-DD形式） | ✅ | `"2025-10-01"` |
| `tags` | タグの配列（AIが自動生成） | ❌ | `["Research", "Fellowship", "JSPS"]` |
| `summary` | 概要（日英対応） | ✅ | `{"ja": "日本学術振興会が募集する特別研究員（DC）に内定しました。", "en": "I have been accepted as a Research Fellow (DC) by the Japan Society for the Promotion of Science (JSPS)."}` |
| `heroImage` | サムネイル画像のパス | ❌ | `"/content/news/news-3-dc2-accepted/images/hero-image.jpg"` または `""`（空文字列でランダム絵文字） |
| `readTime` | 読了時間（AIが自動計算） | ❌ | `"3 min"`, `"5 min"` など |
| `language` | 表示言語（デフォルト） | ✅ | `"ja"`（デフォルト、実際の表示時はロケールに応じて動的に設定される） |
| `status` | 公開状態 | ✅ | `"published"` または `"draft"` |
| `author` | 著者名 | ❌ | `"太田裕紀"`（デフォルト） |
| `category` | カテゴリ（AIが自動決定） | ❌ | `"research"`, `"award"`, `"conference"` など |

#### 重要な注意点（AIが確認すべき点）

- **`slug` の変更は慎重に**: URLが変わるため、既存のブックマークやリンクが壊れます
- **`status` の設定**: `"published"` に設定しないと表示されません
- **`heroImage`**: 空文字列（`""`）の場合、ランダムな絵文字が背景色 `#88beca`（ブルー）の中央に自動配置されます
- **`title` と `summary`**: 必ず日英両対応のオブジェクト形式で設定してください
- **`tags`**: AIがニュースの内容を分析し、適切なタグを自動生成してください
- **`category`**: AIがニュースの内容を分析し、適切なカテゴリを自動決定してください
- **`readTime`**: AIが本文の文字数を分析し、適切な読了時間を自動計算してください
- **日付形式**: `date` は必ず `YYYY-MM-DD` 形式（例: `"2025-10-01"`）で記載してください

#### 例：メタデータの作成

```json
{
  "id": "news-3",
  "title": {
    "ja": "DC2内定しました！",
    "en": "DC2 Research Fellowship Accepted!"
  },
  "slug": "dc2-accepted",
  "date": "2025-10-01",
  "tags": ["Research", "Fellowship", "JSPS"],
  "summary": {
    "ja": "日本学術振興会が募集する特別研究員（DC）に内定しました。",
    "en": "I have been accepted as a Research Fellow (DC) by the Japan Society for the Promotion of Science (JSPS)."
  },
  "heroImage": "",
  "readTime": "3 min",
  "language": "ja",
  "status": "published",
  "author": "太田裕紀",
  "category": "research"
}
```

---

### 2. 本文の生成

#### ファイルの場所
```
content/news/news-{id}-{slug}/content/
├── article_ja.md   # 日本語の本文（AIが生成）
└── article_en.md   # 英語の本文（AIが生成）
```

#### AIによる生成手順

1. **ユーザーが提供した本文内容を確認**
   - ユーザーが提供した本文内容を確認し、適切にフォーマットする準備を行う

2. **既存ニュースを参照**
   - `content/news/news-3-dc2-accepted/content/article_ja.md` や `article_en.md` などを参考にする
   - 既存ニュースと同じトーンや文体を意識する

3. **本文を生成**
   - 見出し（`##`, `###`, `####` など）を適切に使用
   - 段落は適切に分割
   - 専門用語には適切な説明を追加（用語のすぐ後にかっこ書きで簡潔な説明文）
   - ですます調で記述し、わかりやすさを重視
   - リスト（箇条書き、番号付き）を適切に使用
   - 画像が必要な場合は、適切な位置にMarkdown形式で画像を挿入

4. **日英両方のファイルを生成**
   - `article_ja.md`（日本語版）
   - `article_en.md`（英語版）

#### AIによる本文生成時の注意事項

詳細は「[AIによる本文生成時の注意事項](#aiによる本文生成時の注意事項)」を参照してください。

#### Markdown記法の例

ニュース本文では以下のMarkdown記法が使用できます：

- **見出し**: `## セクション`, `### サブセクション`, `#### サブサブセクション` など
- **太字**: `**太字**`
- **斜体**: `*斜体*`
- **リスト**: 
  - 箇条書き: `- 項目1`, `- 項目2`
  - 番号付き: `1. 項目1`, `2. 項目2`
- **画像**: `![説明](/path/to/image.png)` または `![説明](/content/news/.../images/image.gif)`
- **リンク**: `[リンクテキスト](https://example.com)`
- **YouTube動画**: URLのみの段落として記述（自動的にiframe化）

#### 本文の構造例

```markdown
# ニュースタイトル（H1は使用しない）

導入段落です。

## セクション1

セクション1の内容を記述します。

![説明画像](/content/news/news-3-dc2-accepted/images/image.gif)

### サブセクション1

サブセクション1の内容を記述します。

#### サブサブセクション1

サブサブセクション1の内容を記述します。

- 項目1
- 項目2
- 項目3

番号付きリスト：

1. 最初の項目
2. 2番目の項目
3. 3番目の項目

## セクション2

セクション2の内容を記述します。

https://youtu.be/yP-vO3BtxDc?si=SqRDtAp1biD-Qszg
```

#### 画像のパス指定

本文内で画像を参照する場合、以下の形式でパスを指定します：

- **相対パス（推奨）**: `/content/news/news-{id}-{slug}/images/filename.png`
- **絶対パス**: `/images/uploads/filename.png`

**注意**: 画像ファイルは `images/` ディレクトリに配置してください。

---

### 3. 画像・アセットの追加・更新（オプション）

#### ファイルの場所
```
content/news/news-{id}-{slug}/
└── images/    # 画像ファイル（PNG、JPG、GIFなど、オプション）
```

#### 更新手順

1. **画像を追加する場合**
   - `images/` ディレクトリに画像ファイルをコピー
   - ファイル名は既存の命名規則に合わせる（例: `hero-image.jpg`, `background.gif`）

2. **`metadata.json` で画像パスを指定**
   - `heroImage` フィールドに画像パスを設定
   - 例: `"heroImage": "/content/news/news-3-dc2-accepted/images/hero-image.jpg"`
   - サムネイル画像が不要な場合は、空文字列（`""`）を設定（ランダムな絵文字が自動配置されます）

3. **本文で画像を参照する場合**
   - `article_ja.md` または `article_en.md` 内で画像を参照
   - 例: `![説明](/content/news/news-3-dc2-accepted/images/background.gif)`

#### 画像ファイルの命名規則

- **サムネイル画像**: `hero-image.jpg` など
- **背景画像**: `background.gif` など
- **その他**: 用途に応じて適切な名前を付ける

#### サポートされている画像形式

- PNG（`.png`）
- JPEG（`.jpg`, `.jpeg`）
- GIF（`.gif`）
- WebP（`.webp`）

#### 画像の推奨仕様

##### サムネイル画像（HeroImage）

**用途**: ニュースカードと詳細ページの上部に表示されるメイン画像

**推奨仕様**:
- **縦横比**: **3:2**（推奨）
  - ニュースカードで `aspect-[3/2]` として表示されます
  - 例: 1920px × 1280px, 1500px × 1000px など
- **解像度**: 
  - **最小**: 1200px × 800px
  - **推奨**: 1920px × 1280px
  - **最大**: 3840px × 2560px（4K）
- **ファイルサイズ**: **1MB未満**（推奨）
  - ページ読み込み速度を考慮し、可能な限り圧縮してください
  - オンラインツール（TinyPNG、Squooshなど）を使用して最適化することを推奨
- **形式**: PNG（透明度が必要な場合）または JPEG（写真など）
- **カラーモード**: RGB（Web表示用）

**注意点**:
- サムネイル画像が指定されない場合、ランダムな絵文字が背景色 `#88beca`（ブルー）の中央に自動配置されます
- ニュース詳細ページでは `aspect-video`（16:9）として表示されますが、3:2の画像でも問題なく表示されます
- 画像が異なる縦横比の場合、中央部分がトリミングされます

##### 本文内の画像

**用途**: ニュース詳細ページの本文内に表示される画像（GIF、説明図など）

**推奨仕様**:
- **縦横比**: **16:9**（推奨）または用途に応じて自由
  - YouTube動画の埋め込みと統一感を出すため
  - GIFアニメーションなど、用途に応じて自由な縦横比でも問題ありません
- **解像度**:
  - **最小**: 800px × 450px（16:9の場合）
  - **推奨**: 1600px × 900px（16:9の場合）
  - **最大**: 2560px × 1440px（2K）
- **ファイルサイズ**: **2MB未満**（推奨）
  - GIFアニメーションは特にサイズが大きくなりやすいため、フレーム数や色数を調整してください
- **形式**: 
  - **静止画**: PNG（透明度が必要な場合）または JPEG
  - **アニメーション**: GIF（推奨）
- **カラーモード**: RGB（Web表示用）

##### 画像の最適化方法

1. **圧縮ツールの使用**
   - **PNG/JPEG**: [TinyPNG](https://tinypng.com/), [Squoosh](https://squoosh.app/)
   - **GIF**: [EZGIF](https://ezgif.com/optimize)

2. **解像度の調整**
   - 必要以上に高解像度の画像を使用しない
   - 表示サイズに合わせて適切な解像度にリサイズ

3. **形式の選択**
   - **写真**: JPEG（ファイルサイズが小さい）
   - **スクリーンショット・図**: PNG（画質が良い）
   - **アニメーション**: GIF

4. **ファイルサイズの目安**
   - サムネイル画像: 500KB〜1MB
   - 本文内画像: 1MB〜2MB
   - 可能な限り軽量化を心がける

##### 画像の品質チェック

以下の点を確認してください：

- ✅ 画像がぼやけていないか
- ✅ 必要以上に高解像度でないか（ファイルサイズとのバランス）
- ✅ ファイルサイズが適切か（目安: サムネイル1MB未満、本文内画像2MB未満）
- ✅ 縦横比が適切か（サムネイル3:2推奨、本文内画像16:9推奨）
- ✅ カラーモードがRGBか（CMYKではない）

---

### 4. `public/content` へのコピー

#### 重要事項

Viteは `/content` パスを `public/content` から配信するため、`content/news/` に追加したファイルは必ず `public/content/news/` にもコピーする必要があります。

#### コピー対象

以下のファイル・ディレクトリを `public/content/news/news-{id}-{slug}/` にコピーします：

- `info/metadata.json`
- `content/article_ja.md`
- `content/article_en.md`
- `images/` ディレクトリ（存在する場合）

#### コピー手順

1. **ディレクトリ構造を作成**
   ```
   public/content/news/news-{id}-{slug}/
   ├── info/
   ├── content/
   └── images/
   ```

2. **ファイルをコピー**
   - `content/news/news-{id}-{slug}/info/metadata.json` → `public/content/news/news-{id}-{slug}/info/metadata.json`
   - `content/news/news-{id}-{slug}/content/article_ja.md` → `public/content/news/news-{id}-{slug}/content/article_ja.md`
   - `content/news/news-{id}-{slug}/content/article_en.md` → `public/content/news/news-{id}-{slug}/content/article_en.md`
   - `content/news/news-{id}-{slug}/images/` → `public/content/news/news-{id}-{slug}/images/`（存在する場合）

---

### 5. `NEWS_FALLBACK_FOLDERS` への追加

#### ファイルの場所
```
src/lib/content-loader.ts
```

#### 追加手順

1. **`NEWS_FALLBACK_FOLDERS` 配列を開く**
   - `src/lib/content-loader.ts` の `NEWS_FALLBACK_FOLDERS` 配列を確認

2. **新しいニュースフォルダ名を追加**
   - 配列の最後に新しいニュースフォルダ名を追加
   - 例: `'news-3-dc2-accepted'`

3. **既存フォルダとの重複を確認**
   - 既存のフォルダ名と重複していないことを確認

#### 例：`NEWS_FALLBACK_FOLDERS` への追加

```typescript
const NEWS_FALLBACK_FOLDERS = [
  'news-3-dc2-accepted',
  'news-4-france-study-abroad',
  'news-5-new-news'  // 新しいニュースを追加
]
```

---

### 6. 表示確認

#### 開発サーバーでの確認

1. **開発サーバーを起動**
   ```bash
   npm run dev
   ```

2. **ブラウザで確認**
   - ニュース一覧ページ: `http://localhost:3000/news`
   - ニュース詳細ページ: `http://localhost:3000/news/{slug}`
   - トップページ: `http://localhost:3000/`（最新ニュースが自動で表示）

3. **確認ポイント**
   - ✅ メタデータが正しく表示されているか（タイトル、日付、タグなど）
   - ✅ 本文が正しく表示されているか
   - ✅ サムネイル画像が正しく表示されているか（またはランダムな絵文字が表示されているか）
   - ✅ 本文内の画像が正しく表示されているか
   - ✅ YouTube動画が正しく埋め込まれているか（該当する場合）
   - ✅ リストが正しく表示されているか（箇条書き、番号付き）
   - ✅ 見出しのマージンが適切か（H1-H6）
   - ✅ 画像の上下マージンが適切か（`2rem`）
   - ✅ リストの上下マージンが適切か（`1.25rem`）
   - ✅ 日英両方の言語で正しく表示されるか

#### ビルド確認

1. **ビルドを実行**
   ```bash
   npm run build
   ```

2. **ビルドが成功することを確認**
   - エラーが出ないことを確認
   - `dist/` ディレクトリにビルド成果物が生成されることを確認

3. **プレビューで確認**
   ```bash
   npm run preview
   ```
   - ビルド後のサイトをプレビューで確認

---

## よくある質問（FAQ）

### Q1. ニュースが表示されない

**A**: 以下の点を確認してください：

1. **`status` が `"published"` になっているか確認**
   - `"draft"` の場合は表示されません

2. **ファイルパスが正しいか確認**
   - `metadata.json` が `info/` ディレクトリに存在するか
   - `article_ja.md` と `article_en.md` が `content/` ディレクトリに存在するか

3. **`public/content` にファイルがコピーされているか確認**
   - Viteは `/content` パスを `public/content` から配信するため、`public/content/news/` にファイルが存在する必要があります

4. **`NEWS_FALLBACK_FOLDERS` に追加されているか確認**
   - `src/lib/content-loader.ts` の `NEWS_FALLBACK_FOLDERS` 配列に新しいニュースフォルダ名が追加されているか確認

5. **開発サーバーを再起動**
   - ファイルを追加した場合は、開発サーバーを再起動してください

---

### Q2. サムネイル画像が表示されない

**A**: 以下の点を確認してください：

1. **画像パスが正しいか確認**
   - `metadata.json` の `heroImage` フィールドのパスが正しいか
   - 画像パスは `/content/news/...` で始まる絶対パスを推奨

2. **画像ファイルが存在するか確認**
   - `images/` ディレクトリに画像ファイルが実際に存在するか
   - `public/content/news/.../images/` にも画像ファイルがコピーされているか

3. **ファイル名の大文字小文字を確認**
   - ファイル名は大文字小文字を区別します（例: `HeroImage.png` ≠ `heroimage.png`）

4. **画像形式がサポートされているか確認**
   - PNG、JPEG、GIF、WebP形式を確認

5. **`heroImage` が空文字列の場合**
   - `heroImage` が空文字列（`""`）の場合、ランダムな絵文字が背景色 `#88beca`（ブルー）の中央に自動配置されます
   - これは正常な動作です

---

### Q3. 英語モードでニュースが表示されない

**A**: 以下の点を確認してください：

1. **`article_en.md` が存在するか確認**
   - `content/article_en.md` が存在するか
   - `public/content/news/.../content/article_en.md` にもコピーされているか

2. **メタデータの `title` と `summary` が日英対応になっているか確認**
   - `title` と `summary` がオブジェクト形式 `{ ja: string, en: string }` になっているか
   - 英語版のタイトルと概要が正しく設定されているか

3. **`status` が `"published"` になっているか確認**
   - 下書き状態では表示されません

---

### Q4. 画像が本文内に表示されない

**A**: 以下の点を確認してください：

1. **画像パスが正しいか確認**
   - 本文内の画像パスが正しいか（`/content/news/...` で始まる絶対パス推奨）
   - 画像パスは大文字小文字を区別します

2. **画像ファイルが存在するか確認**
   - `images/` ディレクトリに画像ファイルが実際に存在するか
   - `public/content/news/.../images/` にも画像ファイルがコピーされているか

3. **Markdown形式が正しいか確認**
   - 画像のMarkdown形式が正しいか（`![説明](/path/to/image.png)`）

---

### Q5. YouTube動画が埋め込まれない

**A**: 以下の点を確認してください：

1. **URL形式が正しいか確認**
   - YouTube URLが正しい形式か確認
   - 例: `https://youtu.be/yP-vO3BtxDc?si=SqRDtAp1biD-Qszg` または `https://www.youtube.com/watch?v=yP-vO3BtxDc`

2. **URLが単独の段落になっているか確認**
   - YouTube URLは単独の段落として記述する必要があります
   - 他のテキストと混在しないようにしてください

---

### Q6. リストが正しく表示されない

**A**: 以下の点を確認してください：

1. **Markdown形式が正しいか確認**
   - 箇条書き: `- 項目1`, `- 項目2`
   - 番号付き: `1. 項目1`, `2. 項目2`

2. **リストの前後に空行があるか確認**
   - リストの前後には空行が必要です

---

### Q7. 見出しのマージンが適切でない

**A**: 以下の点を確認してください：

1. **見出しレベルを確認**
   - 見出しレベルに応じた適切なマージンが設定されています：
     - H1: `marginTop: '4rem'`
     - H2: `marginTop: '2.5rem'`
     - H3: `marginTop: '2rem'`
     - H4: `marginTop: '1.5rem'`
     - H5: `marginTop: '1.25rem'`
     - H6: `marginTop: '1rem'`

2. **見出しの記法を確認**
   - Markdownの見出し記法（`#`, `##`, `###`, `####` など）が正しく使用されているか

---

### Q8. `public/content` へのコピーを忘れた

**A**: 以下の手順で対応してください：

1. **`content/news/` の内容を `public/content/news/` にコピー**
   - 手動でコピーするか、コマンドでコピーしてください

2. **開発サーバーを再起動**
   - ファイルをコピーした後、開発サーバーを再起動してください

---

### Q9. `NEWS_FALLBACK_FOLDERS` への追加を忘れた

**A**: 以下の手順で対応してください：

1. **`src/lib/content-loader.ts` を開く**

2. **`NEWS_FALLBACK_FOLDERS` 配列に新しいニュースフォルダ名を追加**

3. **開発サーバーを再起動**
   - ファイルを更新した後、開発サーバーを再起動してください

---

## 参考情報

### 既存ニュースの参照

既存のニュースを参照する際は、以下のファイルを参考にしてください：

- `content/news/news-3-dc2-accepted/` - DC2内定のニュース
- `content/news/news-4-france-study-abroad/` - フランス留学のニュース

### ディレクトリ構造の確認

ニュースのディレクトリ構造を確認する際は、以下のコマンドを使用してください：

```bash
# ニュースディレクトリの一覧を確認
ls content/news/

# 特定のニュースの構造を確認
ls -R content/news/news-3-dc2-accepted/
```

### ファイルパスの確認

ファイルパスを確認する際は、以下の点に注意してください：

- 画像パスは `/content/news/...` で始まる絶対パスを推奨
- ファイル名は大文字小文字を区別します
- `public/content/` にもファイルがコピーされているか確認

---

## まとめ

このマニュアルでは、ニュースを追加・更新する手順を詳しく説明しました。主なポイントは以下の通りです：

1. **必要な情報をすべて揃える**: タイトル、概要、本文内容を日英両方で用意してください
2. **メタデータを正しく設定**: `title` と `summary` は必ず日英対応のオブジェクト形式で設定してください
3. **本文を適切にフォーマット**: 見出し、段落、リストなどを適切に使用してください
4. **`public/content` にコピー**: Viteがファイルを配信できるように、必ず `public/content` にもコピーしてください
5. **`NEWS_FALLBACK_FOLDERS` に追加**: コンテンツローダーがニュースを読み込めるように、必ず `NEWS_FALLBACK_FOLDERS` に追加してください

不明な点や問題が発生した場合は、このマニュアルの「よくある質問（FAQ）」セクションを参照してください。
